import * as d3 from 'd3';
import * as c3 from 'c3';

class Chart {

    constructor(target) {
        this.target = target;
        this.chartCounts = null;
    }

    render() {
        var self = this;

        var padding = {
            top: 40,
            right: 60,
            bottom: 30,
            left: 90,
        };

        self.chartCounts = c3.generate({
            bindto: self.target,
            padding: padding,
            data: {
                xs: {
                    'hhincome_n': 'no',
                    'hhincome_y': 'yes',
                },
                columns: [
                    ["no",0.201,0.282,0.295,0.278,0.257,0.194,0.298,0.277,0.265,0.276,0.204,0.23,0.253,0.249,0.22,0.179,0.284,0.294,0.289,0.285,0.28,0.294,0.253,0.229,0.247,0.277,0.231,0.245,0.266,0.247,0.269,0.284,0.269,0.291,0.278,0.284,0.27,0.281,0.263,0.299,0.279,0.236,0.216,0.225,0.233,0.25,0.236,0.263,0.23,0.263,0.275,0.225,0.271,0.266,0.262,0.286,0.285,0.297,0.27,0.297,0.25,0.261,0.254,0.256,0.237,0.2,0.259,0.263,0.273,0.297,0.247,0.27,0.227,0.267,0.259,0.287,0.236,0.266,0.297,0.259,0.236,0.269,0.255,0.24,0.249,0.25,0.258,0.281,0.263,0.236,0.295,0.237,0.28,0.268,0.298,0.244,0.298,0.255,0.276,0.217,0.266,0.299,0.267,0.252,0.26,0.286,0.25,0.256,0.296,0.255,0.262,0.272,0.293,0.225,0.24,0.27,0.299,0.243,0.28,0.244,0.29,0.272,0.296,0.294,0.269,0.235,0.236,0.268,0.246,0.227,0.253,0.292,0.258,0.288],
                    ["hhincome_n",74706,104191,103740,84043,82444,73036,60958,81183,79587,79250,79114,73571,80323,71893,80050,74766,55969,104161,57479,50250,84422,65518,83799,87878,83108,117422,90667,63750,58015,140946,90105,43333,65323,70311,66076,55938,83659,57769,52981,48696,59000,53548,55132,62153,78250,31989,56548,70850,63021,65583,73133,84598,91008,86576,77721,75803,102400,67663,63071,89585,80859,63445,70670,97825,122854,66111,88789,98929,92465,57969,74688,94798,69191,75931,115098,85181,68125,68542,67065,75972,91636,75581,63652,65583,97688,62798,60365,73203,70304,75476,118594,102275,39107,52917,40847,90025,82279,102770,92736,131004,108866,96672,66928,59430,116513,122582,72332,87552,106165,81092,75057,103606,72581,126572,83599,72284,96960,68063,74406,74132,67467,57500,59740,57641,100306,78908,83793,54036,106438,71408,52466,64112,56365,42750],
                    ["yes", 0.379,0.3,0.32,0.314,0.317,0.341,0.301,0.347,0.321,0.386,0.302,0.326,0.302,0.314,0.333,0.341,0.329,0.429,0.316,0.32,0.307,0.334,0.324,0.317,0.301,0.307,0.326,0.404,0.36,0.399,0.311,0.319,0.33,0.302,0.318,0.328,0.318,0.364,0.31,0.318,0.302,0.312,0.328,0.304,0.305,0.303,0.319,0.341,0.431,0.394,0.349,0.334,0.337,0.318,0.39,0.347,0.307,0.307],
                    ["hhincome_y", 117857,108839,121000,72778,82298,75296,55085,72727,83531,61731,64180,33697,94780,54646,64306,48244,115461,113500,77834,61100,50870,47931,32922,95671,63445,64612,74743,60047,75815,101597,88393,97051,67121,72720,77500,85217,90522,85402,42425,62321,73921,93525,71174,105162,48517,121469,89043,20088,80392,48872,47127,51651,68192,79878,35394,36512,58142,27434]
                ],
                type: 'scatter',
                colors: {
                    'hhincome_n': '#3580A3',
                    'hhincome_y': '#E07242'
                }
            },
            transition: {
                duration: 400
            },
            legend: {
                show: false
            },
            point: {
                r: 5
            },
            tooltip: {
                show: false
            },
            grid: {
                focus: {
                    show: false
                },
                x: {
                    lines: [{
                        value: 0.3,
                        text: '',
                        position: 'start',
                        class: 'powerline'
                    }]

                }
            },
            axis: {
                x: {
                    max: 0.6,
                    min: 0,
                    tick: {
                        format: d3.format(".0%"),
                        values: [0,0.10,0.20,0.30,0.40,0.50,0.60],
                        fit: false
                    },
                    padding: {
                        bottom: 0,
                        top: 0,
                        right: 0,
                        left: 0
                    },
                    label: {
                        text: '% of income spent on rent',
                        position: 'outer-center'
                    },
                    show: true,
                },
                y: {
                    max: 160000,
                    min: 0,
                    tick: {
                        format: d3.format("$,")
                    },
                    padding: {
                        bottom: 0,
                        top: 0,
                        right: 0,
                        left: 0
                    },
                    label: {
                        text: 'Median household income',
                        position: 'outer-center'
                    }
            }
            }
        });

        d3.selectAll(".c3-axis-x-label")
        .attr("transform", "translate(0, 5)");

    }
}

export {
    Chart as
    default
}